# TD-ZIGCAM
![](img/GIF.gif)

Receive information from ZIGCAM (Author: [@ToyoshiMorioka](https://github.com/ToyoshiMorioka)) via NDI to achieve local rendering and compositing on [TouchDesigner](https://derivative.ca/).

As of now, please set it like this first:
![setting](img/setting.png)

## To-do

- [ ] Use Shader to do EnvironmentMaker to save performance.
- [ ] Use Shader to do depth compositing to save video memory.
- [ ] Calculate the normal value of ScreenClick so that the new object can be rotated to the normal on the surface.
- [ ] SSAO
- [ ] Manually Add New Plane
- [ ] Image stabilization 

## Function request for ZIGCAM
- [ ] [Fixed focus option on the main operating interface.](https://developer.apple.com/documentation/arkit/arworldtrackingconfiguration/2942262-isautofocusenabled)
- [ ] Depth greater than one (depth to hue or else).
- [x] Add image merging mode to metadata so that TD-ZIGCAM can automatically adapt.
- [x] The near-far of the original projection matrix is ​​too small and may need to be changed manually.
	- [ ] `Issue` The value has not changed.
- [ ] Add the click event and click position on the APP screen to the metadata.
- [x] Return Panel objects (polygonal coordinates) generated by ARkit in the xml structure in the metadata (To receive shadows, etc.).
	- [ ] `Issue` The Y-axis of Panels plane objects are all zero.
	- [ ] `Issue` The Panels needs to add rotation value.
- [ ] `Issue` The image have interlace artifacts.
- [ ] `Issue` The border is not accurate in Tile mode, and there will be borders when cropping.

---
接收ZIGCAM(作者：@ToyoshiMorioka)經由NDI的資訊來實現在TD本地端渲染以及合成。

## 待辦事項
- [ ] 用Shader來做EnvironmentMaker，以節省效能
- [ ] 用Shader來做深度合成，以節省視訊記憶體
- [ ] 求得與計算ScreenClick的法線值，以讓新增物件在表面上可以向法線旋轉
- [ ] SSAO
- [ ] 加入"手動增新平面" 功能
- [ ] 基於加速度的圖像穩定

## 對ZIGCAM的功能請求
- [ ] 主操作介面上的固定對焦選項。
- [ ] 大於一的深度(depth to hue or else)
- [x] 在metadata中加入圖像合併模式，以讓TD-ZIGCAM可以自動適應
- [x] 原始投影矩陣的near-far太小，可能要手動更改
	- [ ] `Issue` 數值並沒有更改。
- [ ] 在metadata中加入APP螢幕上的點擊事件與點擊位置
- [x] 在metadata中以xml結構回傳ARkit產生的Panel平面物件(多角形座標)(用以接收陰影等等)
	- [ ] `Issue` Panel平面物件的Y軸都是零。
	- [ ] `Issue` Panel需要增新旋轉參數。
- [ ] 在Ipad上的多工處理

